<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sigma Nova — Premium Car Rentals Mysore</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --accent: #f59e0b;
            --accent2: #ffb84d;
            --bg1: #071428;
            --bg2: #0b3b57;
            --muted: #8896a3;
            --card-bg: #ffffff;
            --card-text: #0b1b2a;
            --radius: 12px;
            --success: #10b981;
            --danger: #ef4444;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Inter', system-ui, Arial, sans-serif;
            background: linear-gradient(135deg, var(--bg1), var(--bg2));
            color: #eaf2ff;
            -webkit-font-smoothing: antialiased;
            min-height: 100vh;
            line-height: 1.6;
            padding-bottom: 80px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 16px;
        }

        /* Header Styles */
        header {
            position: fixed;
            top: 12px;
            left: 12px;
            right: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 20px;
            border-radius: 14px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }

        .logo {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--accent), var(--accent2));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #071428;
            font-weight: 800;
            font-size: 20px;
        }

        .logo-text {
            margin-left: 10px;
        }

        .logo-text h1 {
            font-size: 18px;
            font-weight: 800;
            margin: 0;
        }

        .logo-text p {
            font-size: 12px;
            color: #cbd5e1;
            margin: 0;
        }

        nav {
            display: flex;
            gap: 12px;
        }

        nav a {
            color: #fff;
            text-decoration: none;
            font-weight: 600;
            padding: 8px 12px;
            border-radius: 8px;
            transition: background 0.3s;
            cursor: pointer;
            font-size: 14px;
            white-space: nowrap;
        }

        nav a:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
        }

        /* Hero Section */
        .hero {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            align-items: center;
            padding: 140px 0 80px;
        }

        .hero-content {
            padding-right: 20px;
        }

        .hero-content h2 {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 20px;
            line-height: 1.2;
        }

        .hero-content p {
            font-size: 1.1rem;
            color: var(--muted);
            margin-bottom: 30px;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .btn {
            background: linear-gradient(90deg, var(--accent), var(--accent2));
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            color: #071428;
            font-weight: 700;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 16px;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(245, 158, 11, 0.3);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: #fff;
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .btn-sm {
            padding: 8px 16px;
            font-size: 14px;
        }

        /* Car Card */
        .car-card {
            background: #fff;
            color: #000;
            border-radius: 18px;
            overflow: hidden;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.35);
        }

        .car-image {
            height: 250px;
            background: linear-gradient(135deg, #f5f5f5, #e0e0e0);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .car-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .car-details {
            padding: 25px;
        }

        .car-details h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        .car-details p {
            color: var(--muted);
            margin-bottom: 20px;
        }

        /* Call Button */
        .call-btn {
            position: fixed;
            right: 20px;
            bottom: 20px;
            background: var(--accent);
            padding: 14px 20px;
            color: #071428;
            font-weight: 800;
            border-radius: 50px;
            border: none;
            cursor: pointer;
            z-index: 2000;
            box-shadow: 0 8px 20px rgba(245, 158, 11, 0.4);
            display: flex;
            align-items: center;
            gap: 8px;
            transition: transform 0.2s;
        }

        .call-btn:hover {
            transform: scale(1.05);
        }

        /* Sections */
        .section {
            padding: 100px 0;
            display: none;
        }

        .section.active {
            display: block;
        }

        .section-title {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 40px;
            text-align: center;
        }

        /* Availability Section */
        .availability-form {
            background: #fff;
            color: #000;
            padding: 30px;
            border-radius: 18px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.1);
            max-width: 600px;
            margin: 0 auto;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border-radius: 10px;
            border: 1px solid #ddd;
            font-size: 16px;
        }

        .package-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        .package-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .package-card:hover {
            background: #e9ecef;
        }

        .package-card.selected {
            border-color: var(--accent);
            background: #fff;
            box-shadow: 0 5px 15px rgba(245, 158, 11, 0.2);
        }

        .package-card h4 {
            margin-bottom: 5px;
        }

        .package-card p {
            color: var(--muted);
            font-size: 14px;
        }

        .result {
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            text-align: center;
            font-weight: 600;
        }

        /* Admin Panel */
        .admin-panel {
            background: #fff;
            color: #000;
            padding: 30px;
            border-radius: 18px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.1);
            max-width: 1000px;
            margin: 0 auto;
        }

        .admin-section {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }

        .admin-section h3 {
            margin-bottom: 15px;
            color: var(--bg1);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
        }

        .stat-card h4 {
            font-size: 14px;
            color: var(--muted);
            margin-bottom: 10px;
        }

        .stat-card .value {
            font-size: 2rem;
            font-weight: 800;
            color: var(--accent);
        }

        .table-container {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        th {
            background: #f8f9fa;
            font-weight: 700;
        }

        .status-badge {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-confirmed {
            background: #d1fae5;
            color: #065f46;
        }

        .status-pending {
            background: #fef3c7;
            color: #92400e;
        }

        .status-cancelled {
            background: #fee2e2;
            color: #991b1b;
        }

        /* Login Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 3000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: #fff;
            color: #000;
            padding: 30px;
            border-radius: 18px;
            width: 100%;
            max-width: 400px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-header h3 {
            margin: 0;
            color: var(--bg1);
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
        }

        .modal-footer {
            margin-top: 20px;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #eee;
        }

        .tab {
            padding: 10px 20px;
            cursor: pointer;
            font-weight: 600;
            border-bottom: 3px solid transparent;
        }

        .tab.active {
            border-bottom: 3px solid var(--accent);
            color: var(--accent);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Offers Section */
        .offers-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .offer-card {
            background: #fff;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border: 2px solid var(--accent);
        }

        .offer-card h4 {
            color: var(--accent);
            margin-bottom: 10px;
        }

        .offer-card p {
            color: var(--muted);
            margin-bottom: 15px;
        }

        .offer-code {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            font-family: monospace;
            font-weight: bold;
            text-align: center;
            margin-bottom: 15px;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 30px 0;
            color: var(--muted);
            font-size: 14px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 60px;
        }

        /* Hidden class */
        .hidden {
            display: none !important;
        }

        /* Toast Notifications */
        .toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--success);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 4000;
            display: flex;
            align-items: center;
            gap: 10px;
            max-width: 90%;
        }

        .toast.error {
            background: var(--danger);
        }

        /* Responsive Design */
        @media (max-width: 900px) {
            .hero {
                grid-template-columns: 1fr;
                padding: 120px 0 60px;
            }
            
            .hero-content {
                padding-right: 0;
                text-align: center;
            }
            
            .hero-content h2 {
                font-size: 2.2rem;
            }
            
            .btn-group {
                justify-content: center;
            }
            
            nav {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: rgba(7, 20, 40, 0.95);
                backdrop-filter: blur(10px);
                flex-direction: column;
                padding: 20px;
                border-radius: 14px;
                margin-top: 10px;
            }
            
            nav.active {
                display: flex;
            }
            
            .mobile-menu-btn {
                display: block;
            }
            
            .package-options {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        @media (max-width: 600px) {
            header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .hero-content h2 {
                font-size: 1.8rem;
            }
            
            .btn-group {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                max-width: 250px;
                justify-content: center;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .section-title {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div style="display: flex; align-items: center;">
            <div class="logo">SN</div>
            <div class="logo-text">
                <h1>Sigma Nova</h1>
                <p>Premium Car Rentals — Mysore</p>
            </div>
        </div>
        
        <button class="mobile-menu-btn" id="mobile-menu-toggle">
            <i class="fas fa-bars"></i>
        </button>
        
        <nav id="main-nav">
            <a onclick="showSection('home')"><i class="fas fa-home"></i> Home</a>
            <a onclick="showSection('availability')"><i class="fas fa-calendar-check"></i> Check Availability</a>
            <a id="profile-link" class="hidden" onclick="showSection('profile')"><i class="fas fa-user"></i> Profile</a>
            <a id="login-link" onclick="showAuthModal()"><i class="fas fa-sign-in-alt"></i> Login</a>
            <a id="logout-link" class="hidden" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</a>
            <a id="admin-link" class="hidden" onclick="showSection('admin')"><i class="fas fa-cog"></i> Admin</a>
        </nav>
    </header>

    <!-- Call Button -->
    <button class="call-btn" onclick="window.location.href='tel:9605489769'">
        <i class="fas fa-phone"></i> Call: 9605489769
    </button>

    <!-- Main Content -->
    <div class="container">
        <!-- Home Section -->
        <section id="home" class="section active">
            <div class="hero">
                <div class="hero-content">
                    <h2>Ride Luxury, Ride Smart</h2>
                    <p>Mercedes Benz E350 Avant-garde — executive comfort with trusted drivers.</p>
                    <div class="btn-group">
                        <a class="btn" onclick="showSection('availability')">
                            <i class="fas fa-search"></i> Check Availability
                        </a>
                        <a class="btn btn-outline" onclick="openBookingModal()">
                            <i class="fas fa-calendar-plus"></i> Book Now
                        </a>
                    </div>
                </div>
                <div class="car-card">
                    <div class="car-image">
                        <img src="https://images.unsplash.com/photo-1617814076667-18e9106396c2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80" alt="Mercedes Benz E350">
                    </div>
                    <div class="car-details">
                        <h3>Mercedes Benz E350 CDI Avantgarde</h3>
                        <p>Premium sedan for executive travel with luxury features and professional chauffeur service.</p>
                        <div class="btn-group">
                            <a class="btn btn-sm" onclick="openBookingModal()">
                                <i class="fas fa-calendar-plus"></i> Book Now
                            </a>
                            <a class="btn btn-outline btn-sm" onclick="showSection('availability')">
                                <i class="fas fa-info-circle"></i> Details
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Availability Section -->
        <section id="availability" class="section">
            <h2 class="section-title">Check Availability</h2>
            <div class="availability-form">
                <div class="form-group">
                    <label for="trip-type">Trip Type</label>
                    <select id="trip-type">
                        <option value="local">Local</option>
                        <option value="outstation">Outstation</option>
                        <option value="airport">Airport Transfer</option>
                    </select>
                </div>
                
                <div id="local-options">
                    <h3>Local Packages</h3>
                    <div class="package-options">
                        <div class="package-card selected" onclick="selectPackage(this, 14000, '8 Hours / 100 KM')">
                            <h4>8 Hours / 100 KM</h4>
                            <p>₹14,000</p>
                        </div>
                        <div class="package-card" onclick="selectPackage(this, 23000, '12 Hours / 120 KM')">
                            <h4>12 Hours / 120 KM</h4>
                            <p>₹23,000</p>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="extra-hours">Extra Hours (₹1,000/hour)</label>
                        <input type="number" id="extra-hours" min="0" value="0">
                    </div>
                    
                    <div class="form-group">
                        <label for="extra-kms">Extra KMs (₹120/km)</label>
                        <input type="number" id="extra-kms" min="0" value="0">
                    </div>
                </div>
                
                <div id="outstation-options" style="display: none;">
                    <div class="form-group">
                        <label for="total-kms">Total KMs (₹100/km)</label>
                        <input type="number" id="total-kms" min="0">
                    </div>
                    
                    <div class="form-group">
                        <label for="driver-shift">Driver Shift</label>
                        <select id="driver-shift">
                            <option value="day">Day (₹800)</option>
                            <option value="night">Night (₹1500)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="days">Number of Days</label>
                        <input type="number" id="days" min="1" value="1">
                    </div>
                </div>
                
                <div id="airport-options" style="display: none;">
                    <div class="form-group">
                        <label for="airport-package">Airport Package</label>
                        <select id="airport-package">
                            <option value="pickup">Airport Pickup - ₹4,000</option>
                            <option value="drop">Airport Drop - ₹4,000</option>
                            <option value="round">Round Trip - ₹7,000</option>
                        </select>
                    </div>
                </div>
                
                <button class="btn" style="width: 100%; margin-top: 20px;" onclick="calculateRent()">
                    <i class="fas fa-calculator"></i> Calculate Rent
                </button>
                
                <div class="result" id="rent-result">
                    No estimate yet.
                </div>
                
                <button class="btn btn-outline" style="width: 100%; margin-top: 15px;" onclick="bookCalculatedPackage()">
                    <i class="fas fa-calendar-plus"></i> Book This Package
                </button>
            </div>
        </section>

        <!-- Profile Section -->
        <section id="profile" class="section">
            <h2 class="section-title">Your Profile</h2>
            <div class="availability-form">
                <div class="form-group">
                    <h3><i class="fas fa-user-circle"></i> User Information</h3>
                    <p><strong>Name:</strong> <span id="profile-name">-</span></p>
                    <p><strong>Mobile:</strong> <span id="profile-mobile">-</span></p>
                    <p><strong>Member Since:</strong> <span id="profile-join-date">-</span></p>
                </div>
                
                <div class="form-group">
                    <h3><i class="fas fa-history"></i> Booking History</h3>
                    <div id="booking-history">
                        <p>No previous bookings found.</p>
                    </div>
                </div>
                
                <div class="form-group">
                    <h3><i class="fas fa-tags"></i> Your Offers</h3>
                    <div id="user-offers">
                        <p>No active offers available.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Admin Section -->
        <section id="admin" class="section">
            <h2 class="section-title">Admin Dashboard</h2>
            <div class="admin-panel">
                <div class="stats-grid">
                    <div class="stat-card">
                        <h4>Total Bookings</h4>
                        <div class="value" id="total-bookings">0</div>
                    </div>
                    <div class="stat-card">
                        <h4>Revenue</h4>
                        <div class="value" id="total-revenue">₹0</div>
                    </div>
                    <div class="stat-card">
                        <h4>Active Customers</h4>
                        <div class="value" id="active-customers">0</div>
                    </div>
                    <div class="stat-card">
                        <h4>Cars Available</h4>
                        <div class="value" id="cars-available">1</div>
                    </div>
                </div>
                
                <div class="admin-section">
                    <h3><i class="fas fa-calendar-alt"></i> Recent Bookings</h3>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Customer</th>
                                    <th>Trip Type</th>
                                    <th>Date</th>
                                    <th>Amount</th>
                                    <th>Status</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody id="admin-bookings-table">
                                <!-- Bookings will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <div class="admin-section">
                    <h3><i class="fas fa-tags"></i> Send Offers</h3>
                    <div class="form-group">
                        <label for="offer-title">Offer Title</label>
                        <input type="text" id="offer-title" placeholder="Special Discount">
                    </div>
                    <div class="form-group">
                        <label for="offer-description">Offer Description</label>
                        <textarea id="offer-description" rows="3" placeholder="Describe the offer..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="offer-discount">Discount (%)</label>
                        <input type="number" id="offer-discount" min="0" max="100" value="10">
                    </div>
                    <div class="form-group">
                        <label for="offer-code">Coupon Code</label>
                        <input type="text" id="offer-code" placeholder="SN2024">
                    </div>
                    <button class="btn" onclick="sendOffer()">
                        <i class="fas fa-paper-plane"></i> Send Offer to All Customers
                    </button>
                </div>
                
                <div class="admin-section">
                    <h3><i class="fas fa-users"></i> Customer Management</h3>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Mobile</th>
                                    <th>Bookings</th>
                                    <th>Last Activity</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody id="admin-customers-table">
                                <!-- Customers will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Auth Modal -->
    <div id="auth-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Sigma Nova</h3>
                <button class="close-btn" onclick="closeAuthModal()">&times;</button>
            </div>
            
            <div class="tabs">
                <div class="tab active" onclick="switchTab('login')">Login</div>
                <div class="tab" onclick="switchTab('signup')">Sign Up</div>
            </div>
            
            <div id="login-tab" class="tab-content active">
                <div class="form-group">
                    <label for="login-mobile">Mobile Number</label>
                    <input type="tel" id="login-mobile" placeholder="Enter 10-digit mobile number">
                </div>
                <div class="form-group">
                    <label for="login-password">Password</label>
                    <input type="password" id="login-password" placeholder="Enter your password">
                </div>
                <div class="modal-footer">
                    <button class="btn btn-outline" onclick="closeAuthModal()">Cancel</button>
                    <button class="btn" onclick="login()">Login</button>
                </div>
                <p style="text-align: center; margin-top: 15px;">
                    <a href="#" style="color: var(--accent);">Forgot password?</a>
                </p>
            </div>
            
            <div id="signup-tab" class="tab-content">
                <div class="form-group">
                    <label for="signup-name">Full Name</label>
                    <input type="text" id="signup-name" placeholder="Enter your full name">
                </div>
                <div class="form-group">
                    <label for="signup-mobile">Mobile Number</label>
                    <input type="tel" id="signup-mobile" placeholder="Enter 10-digit mobile number">
                </div>
                <div class="form-group">
                    <label for="signup-password">Password</label>
                    <input type="password" id="signup-password" placeholder="Create a password">
                </div>
                <div class="form-group">
                    <label for="signup-confirm-password">Confirm Password</label>
                    <input type="password" id="signup-confirm-password" placeholder="Confirm your password">
                </div>
                <div class="modal-footer">
                    <button class="btn btn-outline" onclick="closeAuthModal()">Cancel</button>
                    <button class="btn" onclick="signup()">Sign Up</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Booking Modal -->
    <div id="booking-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Book Your Ride</h3>
                <button class="close-btn" onclick="closeBookingModal()">&times;</button>
            </div>
            <div id="booking-details">
                <!-- Booking details will be populated here -->
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeBookingModal()">Cancel</button>
                <button class="btn" onclick="confirmBooking()">Confirm Booking</button>
            </div>
        </div>
    </div>

    <!-- Admin Login Modal -->
    <div id="admin-login-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Admin Login</h3>
                <button class="close-btn" onclick="closeAdminLoginModal()">&times;</button>
            </div>
            <div class="form-group">
                <label for="admin-username">Username</label>
                <input type="text" id="admin-username" placeholder="Admin username">
            </div>
            <div class="form-group">
                <label for="admin-password">Password</label>
                <input type="password" id="admin-password" placeholder="Admin password">
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeAdminLoginModal()">Cancel</button>
                <button class="btn" onclick="adminLogin()">Login</button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast hidden">
        <i class="fas fa-check-circle"></i>
        <span id="toast-message">Operation completed successfully!</span>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p>&copy; 2023 Sigma Nova Premium Car Rentals. All rights reserved.</p>
            <p>Mysore, Karnataka | Call: 9605489769</p>
        </div>
    </footer>

    <script>
        // User state
        let currentUser = null;
        let isAdmin = false;
        let selectedPackage = {
            price: 14000,
            name: '8 Hours / 100 KM',
            type: 'local'
        };
        let currentCalculation = null;
        let bookings = JSON.parse(localStorage.getItem('sigmaBookings')) || [];
        let offers = JSON.parse(localStorage.getItem('sigmaOffers')) || [];

        // Show selected section and hide others
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionId).classList.add('active');
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            // Close mobile menu if open
            document.getElementById('main-nav').classList.remove('active');
            
            // Load user offers if profile section
            if (sectionId === 'profile' && currentUser) {
                loadUserOffers();
            }
        }

        // Select package
        function selectPackage(element, price, name) {
            // Remove selected class from all packages
            document.querySelectorAll('.package-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Add selected class to clicked package
            element.classList.add('selected');
            
            // Update selected package
            selectedPackage.price = price;
            selectedPackage.name = name;
            selectedPackage.type = 'local';
        }

        // Toggle between trip type options
        document.getElementById('trip-type').addEventListener('change', function() {
            const tripType = this.value;
            
            // Hide all options
            document.getElementById('local-options').style.display = 'none';
            document.getElementById('outstation-options').style.display = 'none';
            document.getElementById('airport-options').style.display = 'none';
            
            // Show selected option
            document.getElementById(`${tripType}-options`).style.display = 'block';
            
            // Reset result
            document.getElementById('rent-result').textContent = 'No estimate yet.';
        });

        // Calculate rent
        function calculateRent() {
            const tripType = document.getElementById('trip-type').value;
            let totalRent = 0;
            let description = '';
            
            if (tripType === 'local') {
                const extraHours = parseInt(document.getElementById('extra-hours').value) || 0;
                const extraKms = parseInt(document.getElementById('extra-kms').value) || 0;
                
                totalRent = selectedPackage.price + (extraHours * 1000) + (extraKms * 120);
                description = `${selectedPackage.name}${extraHours > 0 ? ` + ${extraHours} extra hours` : ''}${extraKms > 0 ? ` + ${extraKms} extra kms` : ''}`;
                
                // Store calculation for booking
                currentCalculation = {
                    type: 'local',
                    package: selectedPackage.name,
                    extraHours: extraHours,
                    extraKms: extraKms,
                    totalRent: totalRent,
                    description: description
                };
                
            } else if (tripType === 'outstation') {
                const totalKms = parseInt(document.getElementById('total-kms').value) || 0;
                const driverShift = document.getElementById('driver-shift').value;
                const days = parseInt(document.getElementById('days').value) || 1;
                const driverAllowance = driverShift === 'night' ? 1500 : 800;
                
                totalRent = (totalKms * 100) + (driverAllowance * days);
                description = `${totalKms} kms, ${days} day(s), ${driverShift} driver`;
                
                // Store calculation for booking
                currentCalculation = {
                    type: 'outstation',
                    totalKms: totalKms,
                    driverShift: driverShift,
                    days: days,
                    totalRent: totalRent,
                    description: description
                };
                
            } else if (tripType === 'airport') {
                const airportPackage = document.getElementById('airport-package').value;
                
                if (airportPackage === 'pickup' || airportPackage === 'drop') {
                    totalRent = 4,000;
                    description = 'Airport ' + (airportPackage === 'pickup' ? 'Pickup' : 'Drop');
                } else {
                    totalRent = 7,000;
                    description = 'Airport Round Trip';
                }
                
                // Store calculation for booking
                currentCalculation = {
                    type: 'airport',
                    package: airportPackage,
                    totalRent: totalRent,
                    description: description
                };
            }
            
            document.getElementById('rent-result').innerHTML = `
                <strong>Estimated Rent: ₹${totalRent.toLocaleString()}</strong><br>
                <small>${description}</small>
            `;
        }

        // Book calculated package
        function bookCalculatedPackage() {
            if (!currentCalculation) {
                showToast('Please calculate rent first.', 'error');
                return;
            }
            
            if (!currentUser) {
                showToast('Please login to book a car.', 'error');
                showAuthModal();
                return;
            }
            
            openBookingModal();
        }

        // Open booking modal
        function openBookingModal() {
            if (!currentUser) {
                showToast('Please login to book a car.', 'error');
                showAuthModal();
                return;
            }
            
            let bookingDetails = '';
            
            if (currentCalculation) {
                bookingDetails = `
                    <div class="form-group">
                        <h4>Booking Details</h4>
                        <p><strong>Package:</strong> ${currentCalculation.description}</p>
                        <p><strong>Total Amount:</strong> ₹${currentCalculation.totalRent.toLocaleString()}</p>
                    </div>
                    <div class="form-group">
                        <label for="booking-date">Pickup Date</label>
                        <input type="date" id="booking-date" min="${new Date().toISOString().split('T')[0]}">
                    </div>
                    <div class="form-group">
                        <label for="booking-time">Pickup Time</label>
                        <input type="time" id="booking-time">
                    </div>
                    <div class="form-group">
                        <label for="pickup-location">Pickup Location</label>
                        <input type="text" id="pickup-location" placeholder="Enter pickup address">
                    </div>
                `;
            } else {
                bookingDetails = `
                    <div class="form-group">
                        <h4>Book Mercedes Benz E350 CDI Avantgarde</h4>
                        <p>Please contact us for custom booking options.</p>
                    </div>
                    <div class="form-group">
                        <label for="booking-date">Preferred Date</label>
                        <input type="date" id="booking-date" min="${new Date().toISOString().split('T')[0]}">
                    </div>
                    <div class="form-group">
                        <label for="booking-time">Preferred Time</label>
                        <input type="time" id="booking-time">
                    </div>
                    <div class="form-group">
                        <label for="pickup-location">Pickup Location</label>
                        <input type="text" id="pickup-location" placeholder="Enter pickup address">
                    </div>
                `;
            }
            
            document.getElementById('booking-details').innerHTML = bookingDetails;
            document.getElementById('booking-modal').classList.add('active');
        }

        // Close booking modal
        function closeBookingModal() {
            document.getElementById('booking-modal').classList.remove('active');
        }

        // Confirm booking
        function confirmBooking() {
            const date = document.getElementById('booking-date').value;
            const time = document.getElementById('booking-time').value;
            const location = document.getElementById('pickup-location').value;
            
            if (!date || !time || !location) {
                showToast('Please fill all booking details.', 'error');
                return;
            }
            
            // Create booking object
            const booking = {
                id: 'BK' + Date.now(),
                customer: currentUser.name,
                mobile: currentUser.mobile,
                date: date,
                time: time,
                location: location,
                status: 'pending',
                createdAt: new Date().toISOString()
            };
            
            // Add calculation details if available
            if (currentCalculation) {
                booking.calculation = currentCalculation;
                booking.amount = currentCalculation.totalRent;
                booking.type = currentCalculation.type;
            } else {
                booking.amount = 0;
                booking.type = 'custom';
            }
            
            // Add to bookings
            bookings.push(booking);
            localStorage.setItem('sigmaBookings', JSON.stringify(bookings));
            
            showToast('Booking confirmed! Our executive will contact you shortly.');
            closeBookingModal();
            
            // Update admin panel if admin is logged in
            if (isAdmin) {
                loadAdminData();
            }
        }

        // Auth modal functions
        function showAuthModal() {
            document.getElementById('auth-modal').classList.add('active');
        }

        function closeAuthModal() {
            document.getElementById('auth-modal').classList.remove('active');
        }

        function switchTab(tabName) {
            // Update tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Activate selected tab
            event.target.classList.add('active');
            document.getElementById(`${tabName}-tab`).classList.add('active');
        }

        // Login function
        function login() {
            const mobile = document.getElementById('login-mobile').value;
            const password = document.getElementById('login-password').value;
            
            if (!mobile || !password) {
                showToast('Please enter both mobile number and password.', 'error');
                return;
            }
            
            if (mobile.length !== 10 || !/^\d+$/.test(mobile)) {
                showToast('Please enter a valid 10-digit mobile number.', 'error');
                return;
            }
            
            // Simple validation - in a real app, this would connect to a backend
            if (mobile === '9505489769' && password === 'admin123') {
                // Admin login
                currentUser = { 
                    name: 'Admin User', 
                    mobile: mobile, 
                    isAdmin: true,
                    joinDate: '2023-01-15'
                };
                isAdmin = true;
                showToast('Admin login successful!');
                updateUIAfterLogin();
                closeAuthModal();
                showSection('admin');
                loadAdminData();
            } else if (mobile && password) {
                // Regular user login - Use the name entered during signup or default
                const savedUserData = localStorage.getItem(`sigmaUser_${mobile}`);
                if (savedUserData) {
                    currentUser = JSON.parse(savedUserData);
                } else {
                    currentUser = { 
                        name: document.getElementById('signup-name').value || 'Customer', 
                        mobile: mobile,
                        joinDate: new Date().toISOString().split('T')[0]
                    };
                }
                isAdmin = false;
                showToast('Login successful!');
                updateUIAfterLogin();
                closeAuthModal();
                showSection('home');
            } else {
                showToast('Invalid credentials. Please try again.', 'error');
            }
        }

        // Signup function
        function signup() {
            const name = document.getElementById('signup-name').value;
            const mobile = document.getElementById('signup-mobile').value;
            const password = document.getElementById('signup-password').value;
            const confirmPassword = document.getElementById('signup-confirm-password').value;
            
            if (!name || !mobile || !password || !confirmPassword) {
                showToast('Please fill in all fields.', 'error');
                return;
            }
            
            if (mobile.length !== 10 || !/^\d+$/.test(mobile)) {
                showToast('Please enter a valid 10-digit mobile number.', 'error');
                return;
            }
            
            if (password.length < 6) {
                showToast('Password must be at least 6 characters long.', 'error');
                return;
            }
            
            if (password !== confirmPassword) {
                showToast('Passwords do not match.', 'error');
                return;
            }
            
            // Save user data to localStorage
            currentUser = { 
                name: name, 
                mobile: mobile,
                joinDate: new Date().toISOString().split('T')[0]
            };
            localStorage.setItem(`sigmaUser_${mobile}`, JSON.stringify(currentUser));
            
            isAdmin = false;
            
            showToast('Account created successfully! You are now logged in.');
            updateUIAfterLogin();
            closeAuthModal();
            showSection('home');
        }

        // Admin login function
        function showAdminLoginModal() {
            document.getElementById('admin-login-modal').classList.add('active');
        }

        function closeAdminLoginModal() {
            document.getElementById('admin-login-modal').classList.remove('active');
        }

        function adminLogin() {
            const username = document.getElementById('admin-username').value;
            const password = document.getElementById('admin-password').value;
            
            if (!username || !password) {
                showToast('Please enter both username and password.', 'error');
                return;
            }
            
            // Simple validation - in a real app, this would connect to a backend
            if (username === 'sigma' && password === 'Password@577501') {
                currentUser = { 
                    name: 'Admin User', 
                    mobile: '9505489769', 
                    isAdmin: true,
                    joinDate: '2023-01-15'
                };
                isAdmin = true;
                showToast('Admin login successful!');
                updateUIAfterLogin();
                closeAdminLoginModal();
                showSection('admin');
                loadAdminData();
            } else {
                showToast('Invalid admin credentials. Please try again.', 'error');
            }
        }

        // Update UI after login
        function updateUIAfterLogin() {
            if (currentUser) {
                // Update navigation
                document.getElementById('login-link').classList.add('hidden');
                document.getElementById('profile-link').classList.remove('hidden');
                document.getElementById('logout-link').classList.remove('hidden');
                
                if (isAdmin) {
                    document.getElementById('admin-link').classList.remove('hidden');
                }
                
                // Update profile section with correct data
                if (currentUser.name) {
                    document.getElementById('profile-name').textContent = currentUser.name;
                }
                if (currentUser.mobile) {
                    document.getElementById('profile-mobile').textContent = currentUser.mobile;
                }
                if (currentUser.joinDate) {
                    document.getElementById('profile-join-date').textContent = currentUser.joinDate;
                }
                
                // Save user to localStorage
                localStorage.setItem('sigmaCurrentUser', JSON.stringify(currentUser));
            }
        }

        // Logout function
        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                currentUser = null;
                isAdmin = false;
                
                // Update navigation
                document.getElementById('login-link').classList.remove('hidden');
                document.getElementById('profile-link').classList.add('hidden');
                document.getElementById('logout-link').classList.add('hidden');
                document.getElementById('admin-link').classList.add('hidden');
                
                showToast('You have been logged out.');
                showSection('home');
                
                // Remove current user from localStorage
                localStorage.removeItem('sigmaCurrentUser');
            }
        }

        // Load admin data
        function loadAdminData() {
            if (!isAdmin) return;
            
            // Update stats
            document.getElementById('total-bookings').textContent = bookings.length;
            document.getElementById('total-revenue').textContent = '₹' + bookings.reduce((sum, booking) => sum + (booking.amount || 0), 0).toLocaleString();
            document.getElementById('active-customers').textContent = new Set(bookings.map(b => b.mobile)).size;
            document.getElementById('cars-available').textContent = '1';
            
            // Populate bookings table
            const bookingsTable = document.getElementById('admin-bookings-table');
            if (bookings.length === 0) {
                bookingsTable.innerHTML = `
                    <tr>
                        <td colspan="7" style="text-align: center; padding: 20px; color: var(--muted);">
                            No bookings found
                        </td>
                    </tr>
                `;
            } else {
                bookingsTable.innerHTML = bookings.map(booking => `
                    <tr>
                        <td>${booking.id}</td>
                        <td>${booking.customer}</td>
                        <td>${booking.type}</td>
                        <td>${booking.date}</td>
                        <td>₹${booking.amount.toLocaleString()}</td>
                        <td><span class="status-badge status-${booking.status}">${booking.status}</span></td>
                        <td>
                            <button class="btn btn-sm" onclick="updateBookingStatus('${booking.id}', 'confirmed')">
                                <i class="fas fa-check"></i>
                            </button>
                            <button class="btn btn-sm" onclick="updateBookingStatus('${booking.id}', 'cancelled')" style="background: var(--danger); margin-left: 5px;">
                                <i class="fas fa-times"></i>
                            </button>
                        </td>
                    </tr>
                `).join('');
            }
            
            // Get unique customers
            const customers = [...new Set(bookings.map(b => b.mobile))].map(mobile => {
                const userBookings = bookings.filter(b => b.mobile === mobile);
                return {
                    name: userBookings[0].customer,
                    mobile: mobile,
                    bookings: userBookings.length,
                    lastActivity: userBookings[userBookings.length - 1].createdAt.split('T')[0]
                };
            });
            
            // Populate customers table
            const customersTable = document.getElementById('admin-customers-table');
            if (customers.length === 0) {
                customersTable.innerHTML = `
                    <tr>
                        <td colspan="5" style="text-align: center; padding: 20px; color: var(--muted);">
                            No customers found
                        </td>
                    </tr>
                `;
            } else {
                customersTable.innerHTML = customers.map(customer => `
                    <tr>
                        <td>${customer.name}</td>
                        <td>${customer.mobile}</td>
                        <td>${customer.bookings}</td>
                        <td>${customer.lastActivity}</td>
                        <td>
                            <button class="btn btn-sm" onclick="contactCustomer('${customer.mobile}')">
                                <i class="fas fa-phone"></i>
                            </button>
                        </td>
                    </tr>
                `).join('');
            }
        }

        // Update booking status
        function updateBookingStatus(bookingId, status) {
            const booking = bookings.find(b => b.id === bookingId);
            if (booking) {
                booking.status = status;
                localStorage.setItem('sigmaBookings', JSON.stringify(bookings));
                loadAdminData();
                showToast(`Booking ${bookingId} ${status}`);
            }
        }

        // Send offer function (admin)
        function sendOffer() {
            if (!isAdmin) {
                showToast('You need admin privileges to send offers.', 'error');
                showAdminLoginModal();
                return;
            }
            
            const title = document.getElementById('offer-title').value;
            const description = document.getElementById('offer-description').value;
            const discount = document.getElementById('offer-discount').value;
            const code = document.getElementById('offer-code').value;
            
            if (!title || !description || !code) {
                showToast('Please fill in all fields for the offer.', 'error');
                return;
            }
            
            // Create offer
            const offer = {
                id: 'OFFER' + Date.now(),
                title: title,
                description: description,
                discount: discount,
                code: code,
                createdAt: new Date().toISOString()
            };
            
            // Add to offers
            offers.push(offer);
            localStorage.setItem('sigmaOffers', JSON.stringify(offers));
            
            showToast(`Offer "${title}" with code ${code} has been sent to all customers!`);
            
            // Clear form
            document.getElementById('offer-title').value = '';
            document.getElementById('offer-description').value = '';
            document.getElementById('offer-discount').value = '10';
            document.getElementById('offer-code').value = '';
        }

        // Load user offers
        function loadUserOffers() {
            const userOffersContainer = document.getElementById('user-offers');
            
            if (offers.length === 0) {
                userOffersContainer.innerHTML = '<p>No active offers available.</p>';
            } else {
                userOffersContainer.innerHTML = `
                    <div class="offers-container">
                        ${offers.map(offer => `
                            <div class="offer-card">
                                <h4>${offer.title}</h4>
                                <p>${offer.description}</p>
                                <div class="offer-code">${offer.code}</div>
                                <p><strong>Discount:</strong> ${offer.discount}%</p>
                            </div>
                        `).join('')}
                    </div>
                `;
            }
        }

        // Toast notification
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toast-message');
            
            toastMessage.textContent = message;
            toast.className = `toast ${type === 'error' ? 'error' : ''}`;
            toast.classList.remove('hidden');
            
            setTimeout(() => {
                toast.classList.add('hidden');
            }, 4000);
        }

        // Mobile menu toggle
        document.getElementById('mobile-menu-toggle').addEventListener('click', function() {
            document.getElementById('main-nav').classList.toggle('active');
        });

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user is already logged in
            const savedUser = localStorage.getItem('sigmaCurrentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                isAdmin = currentUser.isAdmin || false;
                updateUIAfterLogin();
                
                if (isAdmin) {
                    loadAdminData();
                }
            }
            
            // Add admin login link to nav for non-logged in users
            const nav = document.querySelector('nav');
            const adminLoginLink = document.createElement('a');
            adminLoginLink.innerHTML = '<i class="fas fa-lock"></i> Admin';
            adminLoginLink.onclick = showAdminLoginModal;
            nav.appendChild(adminLoginLink);
        });
    </script>
</body>

</html>

